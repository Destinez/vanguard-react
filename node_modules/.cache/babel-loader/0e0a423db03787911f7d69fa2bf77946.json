{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\HP\\\\Documents\\\\code\\\\Digital Switch\\\\AAM-Templates\\\\aam-volt\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\HP\\\\Documents\\\\code\\\\Digital Switch\\\\AAM-Templates\\\\aam-volt\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\HP\\\\Documents\\\\code\\\\Digital Switch\\\\AAM-Templates\\\\aam-volt\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Link,useParams}from\"react-router-dom\";import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faCalendarAlt}from'@fortawesome/free-solid-svg-icons';import{Col,Row,Card,Button,Badge,Dropdown,ButtonGroup,InputGroup,Form,FormSelect,Container}from'@themesberg/react-bootstrap';import{Plans}from\"../../components/Widgets\";import setAuthToken from\"../validation/authAuthToken\";var axios=require('axios').default;export default(function(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),link=_useState2[0],setLink=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),amount=_useState4[0],setAmount=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),plans=_useState6[0],setPlans=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),profile=_useState8[0],setProfile=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),currentPlan=_useState10[0],setCurrentPlan=_useState10[1];var _useState11=useState({plan:0,switch:false}),_useState12=_slicedToArray(_useState11,2),toggle=_useState12[0],setToggle=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),message=_useState14[0],setMessage=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),errorClass=_useState16[0],setErrorClass=_useState16[1];var token=localStorage.getItem(\"token\");useEffect(function(){setAuthToken(token);fetchPlans(token);fetchProfile(token);},[]);var fetchProfile=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(token){var response,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/api/profile\"),{headers:{'authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});case 3:response=_context.sent;res=response.data;if(res.status===true&&res.code===200){setProfile(res.data);console.log(res.data);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchProfile(_x){return _ref.apply(this,arguments);};}();var fetchPlans=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(token){var response,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/api/investment-plans\"),{headers:{'authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});case 3:response=_context2.sent;res=response.data;if(res.status===true&&res.code===200){setPlans(res.data);}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function fetchPlans(_x2){return _ref2.apply(this,arguments);};}();var fetchPlanID=function fetchPlanID(id){plans.map(function(item,key){if(item.plan_id==id){setCurrentPlan(item);}});};var submitInvest=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var data,response,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();setMessage(\"\");setErrorClass('');data={amount:amount,plan_id:currentPlan.plan_id};_context3.prev=4;_context3.next=7;return axios.post(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/api/create-balance-deposit-investment\"),data,{headers:{'authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});case 7:response=_context3.sent;res=response.data;if(res.status===false&&res.code===422){setErrorClass('text-white bg-danger rounded-1 my-2 px-2');res.errors.amount[0]&&setMessage(res.errors.amount[0]);res.errors.plan_id[0]&&setMessage(res.errors.plan_id[0]);}else if(res.status===true&&res.code===200){setMessage(res.message);setErrorClass('text-white bg-success rounded-1 my-2 px-2');}else if(res.status===false&&res.code===423){setMessage(res.message);setErrorClass('text-white bg-danger rounded-1 my-2 px-2');}_context3.next=15;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](4);console.error(_context3.t0);case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[4,12]]);}));return function submitInvest(_x3){return _ref3.apply(this,arguments);};}();var invest=function invest(e,id){e.preventDefault();setToggle({plan:id,switch:true});fetchPlanID(id);};var handleReferralCopy=function handleReferralCopy(e){e.preventDefault();navigator.clipboard.writeText(link);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,{className:\"justify-content-md-center mt-3\"},/*#__PURE__*/React.createElement(Col,{xs:12,sm:12,xl:12,className:\"mb-4\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-success\"},\"Welcome to Vangaurd Investments - your personal client area.\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",null,\"Your referral ID: \",/*#__PURE__*/React.createElement(Link,{to:\"#\",className:\"text-info\",onClick:function onClick(e){return handleReferralCopy(e);}},\"Click to copy referral link\")))))),/*#__PURE__*/React.createElement(Col,{xs:12,sm:12,xl:12,className:\"mb-4\"},/*#__PURE__*/React.createElement(Card,{border:\"light\",className:\"bg-white shadow-sm mb-4\"},toggle.switch==false&&/*#__PURE__*/React.createElement(Card.Body,{className:\"new-investment\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"mb-4 text-center\"},\"Choose an Investment Plan\"),/*#__PURE__*/React.createElement(Row,null,plans?plans.map(function(plan,key){return/*#__PURE__*/React.createElement(Col,{md:6,key:key,className:\"mb-4\"},/*#__PURE__*/React.createElement(Card,{border:\"light\",className:\"shadow-sm bg-dark text-white\"},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Row,{className:\"d-block d-xl-flex align-items-center \"},/*#__PURE__*/React.createElement(Col,{md:12,className:\"text-xl-center d-flex align-items-center justify-content-center mb-2 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-white\"},/*#__PURE__*/React.createElement(\"h5\",null,plan.name))),/*#__PURE__*/React.createElement(Col,{md:12,className:\"mb-2\"},/*#__PURE__*/React.createElement(Container,{className:\"d-flex justify-content-end p-0\"},/*#__PURE__*/React.createElement(Badge,{bg:\"warning\",text:\"white\",className:\"badge-lg w-100 py-3 text-weight-bolder fs-5\"},plan.rate,\"% in \",plan.duration,\" \",plan.duration_label))),/*#__PURE__*/React.createElement(Col,{md:12,className:\"mb-2\"},/*#__PURE__*/React.createElement(Row,{className:\"bg-light align-items-center m-auto\"},/*#__PURE__*/React.createElement(Col,{md:12,className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"my-1 text-dark\"},\"Min. Deposit: \"),/*#__PURE__*/React.createElement(\"h5\",{className:\"my-1 text-dark font-weight-bolder\"},\" $\",plan.min_amount)))),/*#__PURE__*/React.createElement(Col,{md:12,className:\"mb-2\"},/*#__PURE__*/React.createElement(Row,{className:\"bg-light align-items-center m-auto\"},/*#__PURE__*/React.createElement(Col,{md:12,className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"my-1 text-dark\"},\"Max. Deposit: \"),/*#__PURE__*/React.createElement(\"h5\",{className:\"my-1 text-dark font-weight-bolder\"},\" $\",plan.max_amount)))),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"small\",{className:\"text-muted\"},\"Trade the \",plan.name,\" and access benefits like earning up to \",plan.rate,\"% Weekly on your crypto.\")),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3 mb-0\"},/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:function onClick(e){return invest(e,plan.plan_id);},className:\"w-100\"},\"Trade Now\"))))));}):null)),toggle.switch==true&&/*#__PURE__*/React.createElement(Card.Body,{className:\"complete-investment\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"mb-4 text-center\"},\"Invest into \",/*#__PURE__*/React.createElement(\"span\",{className:\"text-warning\"},currentPlan.name)),/*#__PURE__*/React.createElement(Form,{method:\"post\",onSubmit:submitInvest},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12,className:\"mb-3\"},/*#__PURE__*/React.createElement(Form.Group,{id:\"deposit\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Minimum Investment Amount (USD)\"),/*#__PURE__*/React.createElement(Form.Control,{required:true,type:\"text\",placeholder:\"$\".concat(currentPlan.min_amount),disabled:true}))),/*#__PURE__*/React.createElement(Col,{md:12,className:\"mb-3\"},/*#__PURE__*/React.createElement(Form.Group,{id:\"deposit\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Minimum Investment Amount (USD)\"),/*#__PURE__*/React.createElement(Form.Control,{required:true,type:\"text\",placeholder:\"$\".concat(currentPlan.max_amount),disabled:true}))),/*#__PURE__*/React.createElement(Col,{md:12,className:\"mb-3\"},/*#__PURE__*/React.createElement(Form.Group,{id:\"deposit\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Amount (USD)\"),/*#__PURE__*/React.createElement(Form.Control,{onChange:function onChange(e){return setAmount(e.target.value);},required:true,type:\"text\",placeholder:\"Enter Amount to Invest\"}))),/*#__PURE__*/React.createElement(\"div\",null,\"Balance: $\",profile.wallet_balance,\" \",/*#__PURE__*/React.createElement(\"small\",{className:\"text-danger ml-2 pl-2\"},\"(Investment amount will be charged from your balance)\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"text-uppercase \".concat(errorClass)},message),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\"},/*#__PURE__*/React.createElement(Button,{variant:\"info\",type:\"submit\"},\"Invest\")))))))));});","map":{"version":3,"sources":["C:/Users/HP/Documents/code/Digital Switch/AAM-Templates/aam-volt/src/pages/investment/NewInvestment.js"],"names":["React","useEffect","useState","Link","useParams","FontAwesomeIcon","faCalendarAlt","Col","Row","Card","Button","Badge","Dropdown","ButtonGroup","InputGroup","Form","FormSelect","Container","Plans","setAuthToken","axios","require","default","link","setLink","amount","setAmount","plans","setPlans","profile","setProfile","currentPlan","setCurrentPlan","plan","switch","toggle","setToggle","message","setMessage","errorClass","setErrorClass","token","localStorage","getItem","fetchPlans","fetchProfile","get","process","env","REACT_APP_SERVER_URL","headers","response","res","data","status","code","console","log","error","fetchPlanID","id","map","item","key","plan_id","submitInvest","e","preventDefault","post","errors","invest","handleReferralCopy","navigator","clipboard","writeText","name","rate","duration","duration_label","min_amount","max_amount","target","value","wallet_balance"],"mappings":"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","sourcesContent":["\nimport React, { useEffect, useState } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCalendarAlt } from '@fortawesome/free-solid-svg-icons';\nimport { Col, Row, Card, Button, Badge, Dropdown, ButtonGroup, InputGroup, Form, FormSelect, Container } from '@themesberg/react-bootstrap';\n\nimport { Plans } from \"../../components/Widgets\";\nimport setAuthToken from \"../validation/authAuthToken\";\nconst axios = require('axios').default;\n\nexport default () => {\n\n  const [link, setLink] = useState(\"\")\n  const [amount, setAmount] = useState(\"\")\n  const [plans, setPlans] = useState([])\n  const [profile, setProfile] = useState([])\n  const [currentPlan, setCurrentPlan] = useState([])\n  const [toggle, setToggle] = useState({\n    plan: 0,\n    switch: false\n  })\n\n  const [message, setMessage] = useState(\"\");\n  const [errorClass, setErrorClass] = useState(\"\");\n  let token = localStorage.getItem(\"token\");\n\n  useEffect(() => {\n    setAuthToken(token);\n    fetchPlans(token)\n    fetchProfile(token)\n  }, [])\n\n  let fetchProfile = async (token) => {\n\n    try {\n        const response = await axios.get(`${process.env.REACT_APP_SERVER_URL}/api/profile`, {\n            headers: {\n                'authorization': `Bearer ${token}`,\n                'Content-Type': 'application/json'\n            }\n        })\n\n        let res = response.data\n\n        if (res.status === true && res.code === 200) {\n            setProfile(res.data)\n            console.log(res.data)\n        }\n    } catch (err) {\n        console.error(err);\n    }\n}\n\n  let fetchPlans = async (token) => {\n\n    try {\n      const response = await axios.get(`${process.env.REACT_APP_SERVER_URL}/api/investment-plans`, {\n        headers: {\n          'authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      })\n\n      let res = response.data\n\n      if (res.status === true && res.code === 200) {\n        setPlans(res.data)\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n\n  let fetchPlanID = (id) => {\n    plans.map((item, key) => {\n\n      if (item.plan_id == id) {\n        setCurrentPlan(item)\n      }\n    })\n  }\n\n  let submitInvest = async (e) => {\n\n    e.preventDefault()\n    setMessage(\"\")\n    setErrorClass('')\n\n    let data = {\n      amount: amount,\n      plan_id: currentPlan.plan_id\n    }\n\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_SERVER_URL}/api/create-balance-deposit-investment`, data, {\n        headers: {\n          'authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      })\n\n      let res = response.data\n\n      if (res.status === false && res.code === 422) {\n        setErrorClass('text-white bg-danger rounded-1 my-2 px-2')\n\n        res.errors.amount[0] && setMessage(res.errors.amount[0])\n        res.errors.plan_id[0] && setMessage(res.errors.plan_id[0])\n\n\n      }\n      else if (res.status === true && res.code === 200) {\n        setMessage(res.message)\n        setErrorClass('text-white bg-success rounded-1 my-2 px-2')\n      }\n      else if (res.status === false && res.code === 423) {\n        setMessage(res.message)\n        setErrorClass('text-white bg-danger rounded-1 my-2 px-2')\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  const invest = (e, id) => {\n    e.preventDefault()\n\n    setToggle({\n      plan: id,\n      switch: true\n    })\n\n    fetchPlanID(id)\n  }\n\n  let handleReferralCopy = (e) => {\n    e.preventDefault()\n    navigator.clipboard.writeText(link)\n  }\n\n  return (\n    <>\n      <Container>\n        <Row className=\"justify-content-md-center mt-3\">\n\n          <Col xs={12} sm={12} xl={12} className=\"mb-4\">\n            <Card>\n              <div className=\"card-body\">\n                <div className=\"alert alert-success\">\n                  Welcome to Vangaurd Investments - your personal client area.\n                </div>\n                <div>\n                  <span>\n                    Your referral ID: <Link to=\"#\" className=\"text-info\" onClick={e => handleReferralCopy(e)}>Click to copy referral link</Link>\n\n                  </span>\n                </div>\n              </div>\n            </Card>\n\n          </Col>\n\n          <Col xs={12} sm={12} xl={12} className=\"mb-4\">\n            <Card border=\"light\" className=\"bg-white shadow-sm mb-4\">\n              {/* <Card.Header>\n                <Button variant=\"info\" size=\"xs\" >Back</Button>\n              </Card.Header> */}\n              {toggle.switch == false &&\n                <Card.Body className=\"new-investment\">\n                  <h5 className=\"mb-4 text-center\">Choose an Investment Plan</h5>\n\n                  <Row>\n                    {plans ?\n                      plans.map((plan, key) => {\n                        return <Col md={6} key={key} className=\"mb-4\">\n                          <Card border=\"light\" className=\"shadow-sm bg-dark text-white\">\n                            <Card.Body>\n                              <Row className=\"d-block d-xl-flex align-items-center \">\n\n\n                                <Col md={12} className=\"text-xl-center d-flex align-items-center justify-content-center mb-2 \">\n                                  <div className=\"text-white\">\n                                    <h5>{plan.name}</h5>\n                                  </div>\n                                </Col>\n                                <Col md={12} className=\"mb-2\">\n                                  <Container className=\"d-flex justify-content-end p-0\">\n                                    <Badge bg=\"warning\" text=\"white\" className=\"badge-lg w-100 py-3 text-weight-bolder fs-5\">{plan.rate}% in {plan.duration} {plan.duration_label}</Badge>\n                                  </Container>\n                                </Col>\n                                <Col md={12} className=\"mb-2\">\n                                  <Row className=\"bg-light align-items-center m-auto\">\n                                    <Col md={12} className=\"d-flex justify-content-between\">\n                                      <h6 className=\"my-1 text-dark\">Min. Deposit: </h6>\n                                      <h5 className=\"my-1 text-dark font-weight-bolder\"> ${plan.min_amount}</h5>\n                                    </Col>\n                                  </Row>\n                                </Col>\n                                <Col md={12} className=\"mb-2\">\n                                  <Row className=\"bg-light align-items-center m-auto\">\n                                    <Col md={12} className=\"d-flex justify-content-between\">\n                                      <h6 className=\"my-1 text-dark\">Max. Deposit: </h6>\n                                      <h5 className=\"my-1 text-dark font-weight-bolder\"> ${plan.max_amount}</h5>\n                                    </Col>\n                                  </Row>\n                                </Col>\n                                <div className=\"\">\n                                  {/* <small className=\"text-muted\">{plan.description}</small> */}\n                                  <small className=\"text-muted\">\n                                    Trade the {plan.name} and access benefits like earning up to {plan.rate}% Weekly on your crypto.\n                                  </small>\n                                </div>\n                                <div className=\"mt-3 mb-0\">\n                                  <Button variant=\"secondary\" onClick={e => invest(e, plan.plan_id)} className=\"w-100\">Trade Now</Button>\n                                </div>\n                              </Row>\n                            </Card.Body>\n                          </Card >\n                        </Col>\n                      }) : null}\n                  </Row>\n                </Card.Body>\n              }\n\n              {toggle.switch == true &&\n                <Card.Body className=\"complete-investment\">\n                  <h5 className=\"mb-4 text-center\">Invest into <span className=\"text-warning\">{currentPlan.name}</span></h5>\n                  <Form method=\"post\" onSubmit={submitInvest}>\n                    <Row>\n                      <Col md={12} className=\"mb-3\">\n                        <Form.Group id=\"deposit\">\n                          <Form.Label>Minimum Investment Amount (USD)</Form.Label>\n                          <Form.Control required type=\"text\" placeholder={`$${currentPlan.min_amount}`} disabled={true} />\n                        </Form.Group>\n                      </Col>\n                      <Col md={12} className=\"mb-3\">\n                        <Form.Group id=\"deposit\">\n                          <Form.Label>Minimum Investment Amount (USD)</Form.Label>\n                          <Form.Control required type=\"text\" placeholder={`$${currentPlan.max_amount}`} disabled={true} />\n                        </Form.Group>\n                      </Col>\n                      <Col md={12} className=\"mb-3\">\n                        <Form.Group id=\"deposit\">\n                          <Form.Label>Amount (USD)</Form.Label>\n                          <Form.Control onChange={e => setAmount(e.target.value)} required type=\"text\" placeholder=\"Enter Amount to Invest\" />\n                        </Form.Group>\n                      </Col>\n                      <div>\n                        Balance: ${profile.wallet_balance} <small className=\"text-danger ml-2 pl-2\">(Investment amount will be charged from your balance)</small>\n                      </div>\n\n                    </Row>\n\n                    <div className={`text-uppercase ${errorClass}`}>{message}</div>\n                    <div className=\"mt-3\">\n                      <Button variant=\"info\" type=\"submit\">Invest</Button>\n                    </div>\n                  </Form>\n                </Card.Body>\n              }\n            </Card>\n          </Col>\n        </Row>\n      </Container>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}